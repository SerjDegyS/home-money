{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nfunction HistoryFilterComponent_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", p_r3.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(p_r3.label);\n  }\n}\nfunction HistoryFilterComponent_label_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\")(1, \"input\", 17);\n    i0.ɵɵlistener(\"change\", function HistoryFilterComponent_label_19_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.handleChangeType($event.target));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const t_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", t_r4.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(t_r4.label);\n  }\n}\nfunction HistoryFilterComponent_label_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\")(1, \"input\", 17);\n    i0.ɵɵlistener(\"change\", function HistoryFilterComponent_label_24_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.handleChangeCategory($event.target));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const c_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", c_r7.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r7.name);\n  }\n}\nexport let HistoryFilterComponent = /*#__PURE__*/(() => {\n  class HistoryFilterComponent {\n    constructor() {\n      this.onFilterCancel = new EventEmitter();\n      this.onFilterApply = new EventEmitter();\n      this.categories = [];\n      this.selectedPeriod = 'd';\n      this.selectedTypes = [];\n      this.selectedCategories = [];\n      this.timerPeriods = [{\n        type: 'd',\n        label: 'День'\n      }, {\n        type: 'w',\n        label: 'Неделя'\n      }, {\n        type: 'M',\n        label: 'Месяц'\n      }, {\n        type: 'Y',\n        label: 'Год'\n      }];\n      this.types = [{\n        type: 'income',\n        label: 'Доход'\n      }, {\n        type: 'outcome',\n        label: 'Расход'\n      }];\n    }\n    closeFilter() {\n      this.selectedTypes = [];\n      this.selectedCategories = [];\n      this.selectedPeriod = 'd';\n      this.onFilterCancel.emit();\n    }\n    calculateInputParams(field, checked, value) {\n      if (checked) {\n        this[field].indexOf(value) === -1 ? this[field].push(value) : null;\n      } else {\n        this[field] = this[field].filter(i => i !== value);\n      }\n    }\n    handleChangeType({\n      checked,\n      value\n    }) {\n      this.calculateInputParams('selectedTypes', checked, value);\n    }\n    handleChangeCategory({\n      checked,\n      value\n    }) {\n      this.calculateInputParams('selectedCategories', checked, value);\n    }\n    applyFilter() {\n      this.onFilterApply.emit({\n        types: this.selectedTypes,\n        categories: this.selectedCategories,\n        period: this.selectedPeriod\n      });\n    }\n  }\n  HistoryFilterComponent.ɵfac = function HistoryFilterComponent_Factory(t) {\n    return new (t || HistoryFilterComponent)();\n  };\n  HistoryFilterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HistoryFilterComponent,\n    selectors: [[\"degys-history-filter\"]],\n    inputs: {\n      categories: \"categories\"\n    },\n    outputs: {\n      onFilterCancel: \"onFilterCancel\",\n      onFilterApply: \"onFilterApply\"\n    },\n    decls: 30,\n    vars: 4,\n    consts: [[1, \"modal\", \"fade\", \"in\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"modal-title\"], [1, \"modal-body\"], [1, \"form-group\"], [\"for\", \"period\", 1, \"control-label\"], [\"id\", \"period\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"control-label\"], [4, \"ngFor\", \"ngForOf\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [3, \"value\"], [\"type\", \"checkbox\", 1, \"checkbox\", 3, \"value\", \"change\"]],\n    template: function HistoryFilterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function HistoryFilterComponent_Template_button_click_4_listener() {\n          return ctx.closeFilter();\n        });\n        i0.ɵɵelementStart(5, \"span\");\n        i0.ɵɵtext(6, \"\\u00D7\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"h4\", 5);\n        i0.ɵɵtext(8, \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7)(11, \"label\", 8);\n        i0.ɵɵtext(12, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0438\\u043E\\u0434\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"select\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function HistoryFilterComponent_Template_select_ngModelChange_13_listener($event) {\n          return ctx.selectedPeriod = $event;\n        });\n        i0.ɵɵtemplate(14, HistoryFilterComponent_option_14_Template, 2, 2, \"option\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 7)(16, \"label\", 11);\n        i0.ɵɵtext(17, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043F \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u044F\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\");\n        i0.ɵɵtemplate(19, HistoryFilterComponent_label_19_Template, 4, 2, \"label\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 7)(21, \"label\", 11);\n        i0.ɵɵtext(22, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\");\n        i0.ɵɵtemplate(24, HistoryFilterComponent_label_24_Template, 4, 2, \"label\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"div\", 13)(26, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function HistoryFilterComponent_Template_button_click_26_listener() {\n          return ctx.closeFilter();\n        });\n        i0.ɵɵtext(27, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function HistoryFilterComponent_Template_button_click_28_listener() {\n          return ctx.applyFilter();\n        });\n        i0.ɵɵtext(29, \"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedPeriod);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.timerPeriods);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.types);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      }\n    },\n    dependencies: [i1.NgForOf, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel],\n    styles: [\".modal.in[_ngcontent-%COMP%]{display:block}\"]\n  });\n  return HistoryFilterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}